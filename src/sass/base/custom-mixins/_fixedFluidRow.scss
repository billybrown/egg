/////////////////////////////////////-+++-/////////////////////////////////////////
// Fixed-Fluid Row
//
// This is a mixin for applying a sidebar. 
// The sidebar is fixed width and the main column is fluid
//
//
// use the mixin like so:
//
//      .MyExampleClass {
//          @include u-fixedFluidRow(800px, "left", 300px);
//      }
//
/////////////////////////////////////-+++-/////////////////////////////////////////


// $bp - when the grid is triggered
// $direction - which side is fixed
// $width - how big the fixed side is, leave empty to be as wide as the content
// $gutter - the distance between columns
// $layerSpace - the distance between columns when stacked
// $primary - which column should be first when stacked

// these are the styles for just the sidebar or rail
@mixin u-fixedFluidRow__fixed($bp, $width) {

    @include mq($from: $bp) {
        width: $width;
        flex: 0 0 $width;
    }   
}

// these are the styles for the main column
@mixin u-fixedFluidRow__fluid($bp, $layerSpace) {
    margin-bottom: $layerSpace;

    @include mq($from: $bp) {
        margin-bottom: 0;
    }
}

// lets put it all together now
@mixin u-fixedFluidRow($bp, $direction, $gutter, $layerSpace: 0, $primary: "first", $width: auto) {
    display: flex;
    flex-direction: column;

    @include mq($from: $bp) {
        width: 100%;
        flex-direction: row;
    }

    & > div:first-child {
        @if $direction == "left" {
            @include u-fixedFluidRow__fixed($bp, $width);   
        } @else {
            @include u-fixedFluidRow__fluid($bp, $layerSpace); 
        } 

        @if $primary == "first" {
            order: 1;
        } @else {
            order: 2;
        }

        @include mq($from: $bp) {
            padding-right: $gutter*.5;  
            order: 1;    
        }
    }

    // main column
    & > div:last-child {
        @if $direction == "left" {
            @include u-fixedFluidRow__fluid($bp, $layerSpace);
        } @else {
            @include u-fixedFluidRow__fixed($bp, $width);     
        } 

        @if $primary == "first" {
            order: 2;
        } @else {
            order: 1;
        }

        @include mq($from: $bp) {
            order: 2;
            padding-left: $gutter*.5;      
        }
    }
}



/////////////////////////////////////-+++-
// version with a border
//
// $borderColor - the color of the border
// $borderWidth - the width of the border
// $borderPosition - can take "middle", "right", or "left". Left would make the border flush with the left column.

@mixin u-fixedFluidRow--border($bp, $direction, $gutter, $borderColor, $borderWidth, $borderPosition: "middle", $layerSpace: 0, $primary: 'first', $width: 'auto') {
    @include u-fixedFluidRow($bp, $direction, $gutter, $layerSpace, $primary, $width);


    & > div:first-child {
        position: relative;

        @include mq($from: $bp) {
            @if $borderPosition == "left" {
                padding-right: 0;
            } @elseif $borderPosition == "right" {
                padding-right: $gutter;
            }
        } 

        &:after {
            @include u-absolute(null, 0, -$borderWidth * .5, null);
            content: '';
            background: $borderColor;
            width: 100%;
            height: $borderWidth;

            @include mq($from: $bp) {
                width: $borderWidth;
                height: 100%;
                bottom: 0;

                @if $borderPosition == "middle" {
                    right: -$borderWidth * .5;
                }
            }
        }
    }

    & > div:last-child {
        @include mq($from: $bp) {
            @if $borderPosition == "left" {
                padding-left: $gutter;
            } @elseif $borderPosition == "right" {
                padding-left: 0;
            }    
        }    
    }
}




